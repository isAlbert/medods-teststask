# Тестовое задание на позицию Junior Backend Developer

## Задача

Разработать backend-приложение на Ruby on Rails для управления пациентами с возможностью расчета BMR и BMI, а также фильтрации и пагинации списка пациентов. Приложение должно быть контейнеризировано с использованием Docker Compose с PostgreSQL.

---

## Функциональные требования

### 1. Управление пациентами и врачами

#### 1.1. CRUD для пациента

**Описание необходимых полей:**

| Поле | Описание |
|------|----------|
| id | Уникальный идентификатор |
| first_name | Имя |
| last_name | Фамилия |
| middle_name | Отчество (опционально) |
| birthday | Дата рождения |
| gender | Пол |
| height | Рост (см) |
| weight | Вес (кг) |
| created_at | Дата создания записи |
| updated_at | Дата последнего обновления |

**Ограничение уникальности:** Необходимо добавить ограничение уникальности на группу полей: имя, фамилия, отчество и дата рождения.

#### 1.2. CRUD для врача

**Описание необходимых полей:**

| Поле | Описание |
|------|----------|
| id | Уникальный идентификатор |
| first_name | Имя |
| last_name | Фамилия |
| middle_name | Отчество (опционально) |

#### 1.3. Связь пациента и врача

При создании или изменении пациента должна быть реализована возможность указать лечащего врача. У одного пациента может быть несколько врачей, и у одного врача может быть несколько пациентов.

---

### 2. Получение списков пациентов и врачей

#### 2.1. Получение списка пациентов с фильтрацией и пагинацией

**Минимальный перечень необходимых фильтров:**
- full_name (поиск по first_name, last_name, middle_name)
- gender (точное совпадение)
- start_age, end_age (диапазон возраста)
- Другие фильтры, на ваше усмотрение

**Параметры пагинации:** limit, offset

#### 2.2. Получение списка врачей с пагинацией

**Параметры пагинации:** limit, offset

---

### 3. Расчет базового уровня метаболизма (BMR)

Нужен роут, который расчитывает BMR по выбранной формуле для указанного пациента (по его ID). Формула, по которой нужно выполнять расчет должна передаваться внутри запроса.

**Поддерживаемые формулы:**
- Миффлина – Сан Жеора
- Харриса–Бенедикта

Результат расчета должен быть возвращен клиенту и сохранен в БД с привязкой к указанному пользователю.

---

### 4. Получение истории BMR

Нужен роут, который по id пациента сможет вернуть историю расчетов BMR. Роут не должен иметь фильтров, но должен иметь пагинацию.

---

### 5. Расчет индекса массы тела (BMI)

Нужен роут для расчета индекса массы тела, который будет обращаться к внешнему API: https://www.freepublicapis.com/bmi-calculator-api и возвращать результат пользователю.

---

## Нефункциональные требования

### Docker и Docker Compose
- Контейнер Rails + PostgreSQL
- Настройка через .env

### База данных
- PostgreSQL

### Архитектура
- При проверке работы, будет обращаться внимание на выбранные вами подходы к организации кода (соблюдение SOLID и других принципов разработки)

### Swagger (опционально)
- Документация всех эндпоинтов
- Доступ через /api-docs

### Тесты (опционально)
- Минимальные RSpec тесты для CRUD, фильтров и расчетов

---

## Результат работы

Результат должен быть представлен в виде исходного кода на GitHub.

**Обязательные условия для проверки:**
- наличие docker-compose
- файла и возможность развернуть ваш сервис (вместе с БД) одной командой - docker-compose -f docker-compose.yml up -d, на основе дефолтных настроек и конфигураций